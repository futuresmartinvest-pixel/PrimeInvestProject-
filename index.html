<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<title>PrimeGlobalPro</title>

<style>
:root{
  --glass-bg: rgba(255,255,255,0.12);
  --glass-border: rgba(255,255,255,0.25);
  --glow: 0 0 30px rgba(120,200,255,0.35);
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:system-ui,-apple-system,BlinkMacSystemFont;
  min-height:100vh;
  background:
    radial-gradient(circle at 20% 20%, #7f5cff55, transparent 40%),
    radial-gradient(circle at 80% 70%, #00e5ff55, transparent 40%),
    linear-gradient(180deg,#05070f,#0a0f24);
  color:#fff;
  overflow-x:hidden;
}

/* GLASS CARD */
.glass{
  background:var(--glass-bg);
  backdrop-filter: blur(18px);
  -webkit-backdrop-filter: blur(18px);
  border:1px solid var(--glass-border);
  border-radius:22px;
  box-shadow:var(--glow);
}

/* TOP CARD */
.balance-card{
  margin:20px auto 10px;
  width:92%;
  max-width:420px;
  padding:20px;
  text-align:center;
}
.balance-card h2{
  margin:0;
  font-size:14px;
  opacity:.8;
}
.balance{
  font-size:42px;
  font-weight:800;
  margin:6px 0;
}
.vip-badge{
  font-size:13px;
  padding:4px 12px;
  border-radius:999px;
  display:inline-block;
  background:rgba(255,255,255,0.2);
}

/* ENERGY CORE */
.core-wrap{
  display:flex;
  justify-content:center;
  margin:30px 0;
}
.energy-core{
  width:180px;
  height:180px;
  border-radius:50%;
  background:
    radial-gradient(circle at 30% 30%, #aafcff, transparent 35%),
    radial-gradient(circle at 70% 70%, #7b61ff, transparent 40%),
    rgba(255,255,255,0.08);
  border:1px solid rgba(255,255,255,.35);
  backdrop-filter: blur(14px);
  box-shadow:0 0 60px rgba(120,200,255,.6);
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  transition:transform .08s ease;
}
.energy-core:active{
  transform:scale(.96);
}
.energy-core span{
  font-size:18px;
  opacity:.85;
}

/* SCORE */
.score{
  text-align:center;
  font-size:18px;
  margin-top:10px;
  opacity:.9;
}

/* BOTTOM NAV */
.nav{
  position:fixed;
  bottom:14px;
  left:50%;
  transform:translateX(-50%);
  width:92%;
  max-width:420px;
  padding:12px;
  display:flex;
  justify-content:space-around;
}
.nav button{
  background:none;
  border:none;
  color:#fff;
  font-size:22px;
  opacity:.6;
}
.nav button.active{
  opacity:1;
  text-shadow:0 0 12px #7cf;
}

.spacer{height:120px}
</style>
</head>

<body>

<!-- BALANCE CARD -->
<div class="glass balance-card">
  <h2>Balance</h2>
  <div class="balance">$0.00</div>
  <div class="vip-badge" id="vipBadge">VIP: None</div>
</div>

<!-- ENERGY CORE -->
<div class="core-wrap">
  <div class="energy-core" id="tapCore">
    <span>TAP</span>
  </div>
</div>

<div class="score">
  Score: <b id="score">0</b>
</div>

<div class="spacer"></div>

<!-- NAV -->
<div class="glass nav">
  <button class="active">üè†</button>
  <button onclick="location.href='tasks.html'">üìã</button>
  <button onclick="location.href='wallet.html'">üí≥</button>
  <button onclick="location.href='referral.html'">üîó</button>
  <button onclick="location.href='vip.html'">üëë</button>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import {
  getFirestore, doc, getDoc, setDoc, updateDoc, serverTimestamp
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

/* FIREBASE */
const firebaseConfig = {
  apiKey: "AIzaSyA1HZLZRY9UADNnDVBnoBIlG3b-bCkojxs",
  authDomain: "primeinvestproject2.firebaseapp.com",
  projectId: "primeinvestproject2",
  storageBucket: "primeinvestproject2.firebasestorage.app",
  messagingSenderId: "798977477628",
  appId: "1:798977477628:web:c97d1fba72ad7865864079"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

/* USER */
function uid(){
  let u=localStorage.getItem("uid");
  if(!u){
    u="user_"+Date.now()+"_"+Math.random().toString(36).slice(2,8);
    localStorage.setItem("uid",u);
  }
  return u;
}
const userRef = doc(db,"users",uid());

/* TAP CONFIG */
const SCORE_TO_DOLLAR = 10000000;
const MULTIPLIERS = {
  0:1, 1:5, 2:10, 3:20, 4:40, 5:80, 6:800, 7:8000, 8:80000
};
const DAILY_LIMIT = 500000;

/* STATE */
let state = {score:0, tapsToday:0, vipLevel:0, balance:0};

/* INIT */
async function init(){
  const snap = await getDoc(userRef);
  if(!snap.exists()){
    await setDoc(userRef,{
      balance:0, score:0, tapsToday:0, vipLevel:0,
      lastTapReset:serverTimestamp()
    });
  }
  await refresh();
}

/* REFRESH */
async function refresh(){
  const snap = await getDoc(userRef);
  if(!snap.exists()) return;
  state = snap.data();

  document.querySelector(".balance").innerText =
    "$"+(state.balance||0).toFixed(2);
  document.getElementById("score").innerText = state.score||0;
  document.getElementById("vipBadge").innerText =
    "VIP: "+(state.vipLevel||"None");
}

/* TAP */
document.getElementById("tapCore").onclick = async ()=>{
  const snap = await getDoc(userRef);
  const u = snap.data();

  if(u.vipLevel==0 && u.tapsToday>=DAILY_LIMIT){
    alert("Daily limit reached");
    return;
  }

  const gain = MULTIPLIERS[u.vipLevel||0];
  const newScore = (u.score||0)+gain;
  const newBalance =
    Math.floor(newScore/SCORE_TO_DOLLAR) -
    Math.floor((u.score||0)/SCORE_TO_DOLLAR);

  await updateDoc(userRef,{
    score:newScore,
    tapsToday:(u.tapsToday||0)+1,
    balance:(u.balance||0)+newBalance
  });

  refresh();
};

init();
</script>

</body>
</html>
