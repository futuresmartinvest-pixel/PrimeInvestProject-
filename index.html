<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport"
content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
<title>PrimeGlobalPro</title>

<style>
/* --- SAME STYLES YOU HAD (unchanged visually) --- */
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  color:#fff;
  background:
    radial-gradient(circle at 18% 18%, rgba(165,120,255,.45), transparent 42%),
    radial-gradient(circle at 82% 75%, rgba(0,220,255,.35), transparent 45%),
    radial-gradient(circle at 40% 85%, rgba(255,160,90,.22), transparent 40%),
    linear-gradient(180deg,#05070f,#0a0f24);
  overflow-x:hidden;
}

.wrap{padding:18px 16px 110px; max-width:420px; margin:0 auto;}
.glass{
  background:rgba(255,255,255,0.12);
  border:1px solid rgba(255,255,255,0.22);
  box-shadow:0 18px 50px rgba(0,0,0,.35);
  backdrop-filter: blur(18px);
  border-radius:24px;
}
.card{padding:18px;text-align:center}
.label{opacity:.8;font-weight:600}
.amount{font-size:52px;font-weight:900;margin:6px 0}
.vip-pill{display:inline-block;padding:8px 14px;border-radius:999px;background:rgba(255,255,255,.14)}

.menu{
  position:absolute;top:14px;right:14px;
}
.menu button{
  background:none;border:none;color:#fff;font-size:22px;cursor:pointer;
}
.menu-box{
  position:absolute;right:0;top:30px;
  background:rgba(0,0,0,.7);
  border-radius:14px;
  padding:8px;
  display:none;
}
.menu-box button{
  display:block;
  width:100%;
  background:none;
  border:none;
  color:#fff;
  padding:10px;
  text-align:left;
  cursor:pointer;
}

.orb{
  width:min(250px,72vw);
  height:min(250px,72vw);
  border-radius:50%;
  margin:22px auto;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:900;
  border:1px solid rgba(255,255,255,.3);
}
.stats{padding:14px}
.row{display:flex;justify-content:space-between;font-weight:700}
</style>
</head>

<body>

<div class="wrap">

  <!-- MENU -->
  <div class="menu">
    <button onclick="toggleMenu()">â‹®</button>
    <div class="menu-box" id="menuBox">
      <button onclick="changePassword()">Change password</button>
      <button onclick="logout()">Logout</button>
    </div>
  </div>

  <!-- BALANCE -->
  <div class="glass card">
    <div class="label">Balance</div>
    <div class="amount" id="balanceUsd">$0.00</div>
    <div class="vip-pill" id="vipPill">VIP: None</div>
  </div>

  <!-- TAP -->
  <div class="orb" id="tapBtn">TAP</div>

  <!-- STATS -->
  <div class="glass stats">
    <div class="row"><span>Score</span><span id="scoreText">0</span></div>
    <div class="row"><span>Tap power</span><span id="powerText">1Ã—</span></div>
    <div class="row"><span>Today taps</span><span id="todayText">0</span></div>
  </div>

</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { 
  getAuth, 
  onAuthStateChanged, 
  signOut,
  sendPasswordResetEmail
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import {
  getFirestore, doc, getDoc, runTransaction
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyA1HZLZRY9UADNnDVBnoBIlG3b-bCkojxs",
  authDomain: "primeinvestproject2.firebaseapp.com",
  projectId: "primeinvestproject2"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

let userRef;

/* ðŸ” AUTH GUARD */
onAuthStateChanged(auth, async(user)=>{
  if(!user){
    location.replace("auth.html");
    return;
  }
  userRef = doc(db,"users",user.uid);
  loadUser();
});

/* LOAD USER (VIP ONLY FROM ADMIN APPROVAL) */
async function loadUser(){
  const snap = await getDoc(userRef);
  if(!snap.exists()) return;
  const u = snap.data();

  const vipLevel = u.vip?.level || 0;
  const power = u.vip?.multiplier || 1;

  vipPill.textContent = vipLevel ? `VIP: ${vipLevel}` : "VIP: None";
  powerText.textContent = power + "Ã—";
}

/* MENU */
window.toggleMenu = ()=>{
  menuBox.style.display =
    menuBox.style.display === "block" ? "none" : "block";
};

/* LOGOUT */
window.logout = async()=>{
  await signOut(auth);
  location.replace("auth.html");
};

/* CHANGE PASSWORD (EMAIL VERIFICATION HERE) */
window.changePassword = async()=>{
  const user = auth.currentUser;
  await sendPasswordResetEmail(auth, user.email);
  alert("Password reset email sent.");
};
</script>

</body>
</html>
