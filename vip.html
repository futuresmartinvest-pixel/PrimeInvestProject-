<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport"
content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">

<title>VIP</title>

<style>
body{
  margin:0;
  font-family: system-ui, sans-serif;
  background:#5b2fc2;
  color:#fff;
}

.header{
  padding:18px;
  font-size:22px;
  font-weight:700;
}

.container{
  padding:14px;
}

.vip-card{
  background:#7351c9;
  border-radius:20px;
  padding:16px;
  margin-bottom:14px;
}

.vip-title{
  font-size:20px;
  font-weight:700;
}

.vip-info{
  margin-top:6px;
  opacity:0.9;
}

.vip-btn{
  margin-top:12px;
  width:100%;
  padding:12px;
  border:none;
  border-radius:16px;
  background:#fff;
  color:#5b2fc2;
  font-size:16px;
  font-weight:700;
}

.vip-btn:disabled{
  background:rgba(255,255,255,0.5);
  color:#555;
}
</style>
</head>

<body>

<div class="header">VIP Membership</div>

<div class="container" id="vipList"></div>

<script>
/* =========================
   VIP CONFIG
========================= */
const vipPlans = [
 {id:1, price:30, rate:2.33},
 {id:2, price:100, rate:3.33},
 {id:3, price:499, rate:3.66},
 {id:4, price:999, rate:3.99},
 {id:5, price:4999, rate:4.33},
 {id:6, price:9999, rate:4.99},
 {id:7, price:49999, rate:6.99},
 {id:8, price:99999, rate:7.33},
];

let userVIP = JSON.parse(localStorage.getItem("userVIP")) || {};
let balance = Number(localStorage.getItem("balance") || 0);

const vipList = document.getElementById("vipList");

/* =========================
   RENDER VIP
========================= */
vipPlans.forEach(vip=>{
  const status = userVIP[vip.id]?.status || "none";

  const div = document.createElement("div");
  div.className="vip-card";

  div.innerHTML = `
    <div class="vip-title">VIP ${vip.id}</div>
    <div class="vip-info">Price: $${vip.price}</div>
    <div class="vip-info">Daily Profit: ${vip.rate}%</div>
    <button class="vip-btn" ${status!=="none"?"disabled":""}>
      ${status==="active"?"Active":
        status==="pending"?"Pending Approval":
        "Activate VIP"}
    </button>
  `;

  const btn = div.querySelector("button");

  if(status==="none"){
    btn.onclick = ()=>{
      userVIP[vip.id] = {
        status:"pending",
        price:vip.price,
        rate:vip.rate,
        requestedAt:Date.now()
      };

      localStorage.setItem("userVIP", JSON.stringify(userVIP));

      alert(
        "VIP request created.\n\n" +
        "Send deposit proof to Telegram:\n" +
        "@SmartInvest202\n\n" +
        "Admin will activate your VIP."
      );

      window.open("https://t.me/SmartInvest202","_blank");
      location.reload();
    };
  }

  vipList.appendChild(div);
});

/* =========================
   DAILY PROFIT (AUTO)
========================= */
function applyDailyProfit(){
  Object.values(userVIP).forEach(vip=>{
    if(vip.status!=="active") return;

    const now = Date.now();
    const last = vip.lastProfit || vip.start;

    if(now - last >= 86400000){
      const profit = vip.price * (vip.rate/100);
      balance += profit;

      vip.lastProfit = now;

      localStorage.setItem("balance", balance.toFixed(2));
      localStorage.setItem("userVIP", JSON.stringify(userVIP));
    }
  });
}

applyDailyProfit();
</script>

</body>
</html>
