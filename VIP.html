<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>VIP Membership</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  margin:0;
  font-family:system-ui,sans-serif;
  background:#f5f5f5;
}
.header{
  background:#b7ff2c;
  padding:20px;
  font-size:22px;
  font-weight:700;
}
.container{padding:16px;}
.vip-card{
  background:#fff;
  border-radius:16px;
  padding:16px;
  margin-bottom:14px;
  box-shadow:0 4px 12px rgba(0,0,0,0.08);
}
.vip-btn{
  margin-top:12px;
  background:#000;
  color:#fff;
  border:none;
  padding:12px;
  width:100%;
  border-radius:12px;
  font-size:16px;
}
.vip-btn:disabled{background:#999;}
.status{margin-top:8px;font-weight:600;}
</style>
</head>

<body>

<div class="header">VIP Membership</div>
<div class="container" id="vipList"></div>

<script>
const vipPlans = [
 {id:1, price:30, rate:2.33},
 {id:2, price:100, rate:3.33},
 {id:3, price:499, rate:3.66},
 {id:4, price:999, rate:3.99},
 {id:5, price:4999, rate:4.33},
 {id:6, price:9999, rate:4.99},
 {id:7, price:49999, rate:6.99},
 {id:8, price:99999, rate:7.33},
];

let wallet = JSON.parse(localStorage.getItem("wallet")) || {balance:0};
let userVIP = JSON.parse(localStorage.getItem("userVIP")) || {};

function applyDailyProfit(){
  const now = Date.now();
  Object.values(userVIP).forEach(vip=>{
    if(vip.status!=="active") return;
    if(now > vip.expiry){
      vip.status="expired";
      return;
    }
    if(now - vip.lastProfit >= 86400000){
      wallet.balance += vip.dailyProfit;
      vip.lastProfit = now;
    }
  });
  localStorage.setItem("wallet", JSON.stringify(wallet));
  localStorage.setItem("userVIP", JSON.stringify(userVIP));
}
applyDailyProfit();

const list = document.getElementById("vipList");

vipPlans.forEach(vip=>{
  const v = userVIP[vip.id];
  const div = document.createElement("div");
  div.className="vip-card";

  let statusText = "Not active";
  if(v){
    if(v.status==="active") statusText="✅ Active";
    if(v.status==="pending") statusText="⏳ Pending approval";
    if(v.status==="expired") statusText="❌ Expired";
  }

  div.innerHTML=`
    <h3>VIP ${vip.id}</h3>
    <div>Price: $${vip.price}</div>
    <div>Daily Profit: ${(vip.price*vip.rate/100).toFixed(2)} USD</div>
    <div class="status">${statusText}</div>
    <button class="vip-btn" ${v?"disabled":""}>Activate VIP</button>
  `;

  if(!v){
    div.querySelector("button").onclick=()=>{
      userVIP[vip.id]={
        status:"pending",
        price:vip.price,
        dailyProfit:(vip.price*vip.rate/100),
        start:0,
        expiry:0,
        lastProfit:0
      };
      localStorage.setItem("userVIP",JSON.stringify(userVIP));
      window.open("https://t.me/SmartInvest202","_blank");
      alert("Send deposit proof to Telegram for approval");
      location.reload();
    };
  }

  list.appendChild(div);
});
</script>
</body>
</html>
